{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KASIM\\\\Documents\\\\falling-book\\\\bookist-alpha\\\\client\\\\src\\\\components\\\\booklist\\\\Booklist.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { updateBooklistName, purgeNonUser } from \"../../services/librarySlice\";\nimport classes from \"./Booklist.module.css\";\nimport BooklistFooter from \"./footer/BooklistFooter\";\nimport BooklistItem from \"./item/BooklistItem\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Booklist(_ref) {\n  _s();\n\n  let {\n    booklistObj,\n    getBooklistTitles\n  } = _ref;\n  const [books, setBooks] = useState(null);\n  const [editTitle, setEditTitle] = useState(false);\n  const navigate = useNavigate();\n  const userBooks = useSelector(state => state.library.userBooks);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (books === null) {\n      dispatch(purgeNonUser());\n      setBooks(userBooks.filter(book => book.booklists && book.booklists.includes(booklistObj.booklist_title)));\n    }\n  }, [dispatch, booklistObj.booklist_title, userBooks, books]);\n\n  const onBooklistRenameClick = async newBooklistTitle => {\n    if (newBooklistTitle !== booklistObj.booklist_title && newBooklistTitle.length > 0 && newBooklistTitle !== \"Read Books\") {\n      await axios.put(\"/api/library/booklist/rename\", {\n        booklist_id: booklistObj.booklist_id,\n        booklistTitle: newBooklistTitle\n      });\n      dispatch(updateBooklistName({\n        oldName: booklistObj.booklist_title,\n        newName: newBooklistTitle\n      }));\n      getBooklistTitles();\n    }\n\n    setEditTitle(false);\n  };\n\n  const onBooklistDeleteClick = async () => {\n    await axios.post(\"/api/library/booklist/delete\", {\n      booklistTitle: booklistObj.booklist_title\n    });\n    dispatch(updateBooklistName({\n      type: \"delete\",\n      oldName: booklistObj.booklist_title\n    }));\n    getBooklistTitles();\n  };\n\n  const onExpandEditClick = async () => {\n    navigate(`/booklist/?id=${booklistObj.booklist_id}&title=${booklistObj.booklist_title}`);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: books !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: classes.booklist,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: classes.body,\n        children: books && books.map(book => /*#__PURE__*/_jsxDEV(BooklistItem, {\n          book: book\n        }, uuidv4(), false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 16\n      }, this), /*#__PURE__*/_jsxDEV(BooklistFooter, {\n        editTitle: editTitle,\n        setEditTitle: setEditTitle,\n        onBooklistRenameClick: onBooklistRenameClick,\n        books: books,\n        booklistObj: booklistObj,\n        onBooklistDeleteClick: onBooklistDeleteClick,\n        onExpandEditClick: onExpandEditClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 16\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n\n_s(Booklist, \"3Hgja4f9ooVV/F7SRDMzC6+fI4o=\", false, function () {\n  return [useNavigate, useSelector, useDispatch];\n});\n\n_c = Booklist;\n\nvar _c;\n\n$RefreshReg$(_c, \"Booklist\");","map":{"version":3,"sources":["C:/Users/KASIM/Documents/falling-book/bookist-alpha/client/src/components/booklist/Booklist.jsx"],"names":["axios","useEffect","useState","useDispatch","useSelector","useNavigate","v4","uuidv4","updateBooklistName","purgeNonUser","classes","BooklistFooter","BooklistItem","Booklist","booklistObj","getBooklistTitles","books","setBooks","editTitle","setEditTitle","navigate","userBooks","state","library","dispatch","filter","book","booklists","includes","booklist_title","onBooklistRenameClick","newBooklistTitle","length","put","booklist_id","booklistTitle","oldName","newName","onBooklistDeleteClick","post","type","onExpandEditClick","booklist","body","map"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { updateBooklistName, purgeNonUser } from \"../../services/librarySlice\";\r\nimport classes from \"./Booklist.module.css\";\r\nimport BooklistFooter from \"./footer/BooklistFooter\";\r\nimport BooklistItem from \"./item/BooklistItem\";\r\n\r\nexport default function Booklist({ booklistObj, getBooklistTitles }) {\r\n   const [books, setBooks] = useState(null);\r\n   const [editTitle, setEditTitle] = useState(false);\r\n   const navigate = useNavigate();\r\n\r\n   const userBooks = useSelector((state) => state.library.userBooks);\r\n   const dispatch = useDispatch();\r\n\r\n   useEffect(() => {\r\n      if (books === null) {\r\n         dispatch(purgeNonUser());\r\n         setBooks(\r\n            userBooks.filter(\r\n               (book) =>\r\n                  book.booklists &&\r\n                  book.booklists.includes(booklistObj.booklist_title)\r\n            )\r\n         );\r\n      }\r\n   }, [dispatch, booklistObj.booklist_title, userBooks, books]);\r\n\r\n   const onBooklistRenameClick = async (newBooklistTitle) => {\r\n      if (\r\n         newBooklistTitle !== booklistObj.booklist_title &&\r\n         newBooklistTitle.length > 0 &&\r\n         newBooklistTitle !== \"Read Books\"\r\n      ) {\r\n         await axios.put(\"/api/library/booklist/rename\", {\r\n            booklist_id: booklistObj.booklist_id,\r\n            booklistTitle: newBooklistTitle,\r\n         });\r\n         dispatch(\r\n            updateBooklistName({\r\n               oldName: booklistObj.booklist_title,\r\n               newName: newBooklistTitle,\r\n            })\r\n         );\r\n         getBooklistTitles();\r\n      }\r\n      setEditTitle(false);\r\n   };\r\n\r\n   const onBooklistDeleteClick = async () => {\r\n      await axios.post(\"/api/library/booklist/delete\", {\r\n         booklistTitle: booklistObj.booklist_title,\r\n      });\r\n      dispatch(\r\n         updateBooklistName({\r\n            type: \"delete\",\r\n            oldName: booklistObj.booklist_title,\r\n         })\r\n      );\r\n\r\n      getBooklistTitles();\r\n   };\r\n\r\n   const onExpandEditClick = async () => {\r\n      navigate(\r\n         `/booklist/?id=${booklistObj.booklist_id}&title=${booklistObj.booklist_title}`\r\n      );\r\n   };\r\n\r\n   return (\r\n      <>\r\n         {books !== null && (\r\n            <div className={classes.booklist}>\r\n               <div className={classes.body}>\r\n                  {books &&\r\n                     books.map((book) => (\r\n                        <BooklistItem book={book} key={uuidv4()} />\r\n                     ))}\r\n               </div>\r\n\r\n               <BooklistFooter\r\n                  editTitle={editTitle}\r\n                  setEditTitle={setEditTitle}\r\n                  onBooklistRenameClick={onBooklistRenameClick}\r\n                  books={books}\r\n                  booklistObj={booklistObj}\r\n                  onBooklistDeleteClick={onBooklistDeleteClick}\r\n                  onExpandEditClick={onExpandEditClick}\r\n               />\r\n            </div>\r\n         )}\r\n      </>\r\n   );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}