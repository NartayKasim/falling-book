{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import classes from\"./Login.module.css\";import Button from\"../../../components/common/button/Button\";import emailIcon from\"../../../assets/email.png\";import passwordIcon from\"../../../assets/password.png\";import axios from\"axios\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{useNavigate}from\"react-router\";import{getUserBooks,toggleIsLoggedIn}from\"../../../services/librarySlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),errorState=_useState6[0],setErrorState=_useState6[1];var dispatch=useDispatch();var navigate=useNavigate();var onLoginClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(email.length===0||password.length===0)){_context.next=2;break;}return _context.abrupt(\"return\",setErrorState(\"Please enter an email and password.\"));case 2:_context.prev=2;_context.next=5;return axios.post(\"/api/auth/login\",{email:email,password:password});case 5:dispatch(getUserBooks());dispatch(toggleIsLoggedIn());navigate(\"/library\");_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);setErrorState(_context.t0.response.data);case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,10]]);}));return function onLoginClick(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.loginWrapper,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.loginBody,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:emailIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{className:classes.input,type:\"text\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.labels,children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.inputWrapper,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.inputIcon,src:passwordIcon,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{className:classes.input,type:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.errors,children:errorState||null})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.loginButtons,children:/*#__PURE__*/_jsx(Button,{onClickFunc:onLoginClick,children:\"Login\"})})]});}","map":{"version":3,"sources":["C:/Users/KASIM/Documents/falling-book/bookist-alpha/client/src/pages/login/login/Login.jsx"],"names":["classes","Button","emailIcon","passwordIcon","axios","useState","useDispatch","useNavigate","getUserBooks","toggleIsLoggedIn","Login","email","setEmail","password","setPassword","errorState","setErrorState","dispatch","navigate","onLoginClick","length","post","response","data","loginWrapper","loginBody","labels","inputWrapper","inputIcon","input","e","target","value","errors","loginButtons"],"mappings":"+YAAA,MAAOA,CAAAA,OAAP,KAAoB,oBAApB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0CAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,YAAT,CAAuBC,gBAAvB,KAA+C,gCAA/C,C,wFAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC7B,cAA0BL,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eACA,eAAgCP,QAAQ,CAAC,EAAD,CAAxC,yCAAOQ,QAAP,eAAiBC,WAAjB,eACA,eAAoCT,QAAQ,CAAC,EAAD,CAA5C,yCAAOU,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CAEA,GAAMY,CAAAA,YAAY,0FAAG,wIACdR,KAAK,CAACS,MAAN,GAAiB,CAAjB,EAAsBP,QAAQ,CAACO,MAAT,GAAoB,CAD5B,0DAERJ,aAAa,CAAC,qCAAD,CAFL,+CAKTZ,CAAAA,KAAK,CAACiB,IAAN,CAAW,iBAAX,CAA8B,CACjCV,KAAK,CAALA,KADiC,CAEjCE,QAAQ,CAARA,QAFiC,CAA9B,CALS,QASfI,QAAQ,CAACT,YAAY,EAAb,CAAR,CACAS,QAAQ,CAACR,gBAAgB,EAAjB,CAAR,CACAS,QAAQ,CAAC,UAAD,CAAR,CAXe,iFAafF,aAAa,CAAC,YAAEM,QAAF,CAAWC,IAAZ,CAAb,CAbe,qEAAH,kBAAZJ,CAAAA,YAAY,0CAAlB,CAiBA,mBACG,aAAK,SAAS,CAAEnB,OAAO,CAACwB,YAAxB,wBACG,aAAK,SAAS,CAAExB,OAAO,CAACyB,SAAxB,wBACG,YAAK,SAAS,CAAEzB,OAAO,CAAC0B,MAAxB,mBADH,cAEG,aAAK,SAAS,CAAE1B,OAAO,CAAC2B,YAAxB,wBACG,YAAK,SAAS,CAAE3B,OAAO,CAAC4B,SAAxB,CAAmC,GAAG,CAAE1B,SAAxC,CAAmD,GAAG,CAAC,EAAvD,EADH,cAEG,cACG,SAAS,CAAEF,OAAO,CAAC6B,KADtB,CAEG,IAAI,CAAC,MAFR,CAGG,QAAQ,CAAE,kBAACC,CAAD,QAAOlB,CAAAA,QAAQ,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf,EAHb,EAFH,GAFH,cAUG,YAAK,SAAS,CAAEhC,OAAO,CAAC0B,MAAxB,sBAVH,cAWG,aAAK,SAAS,CAAE1B,OAAO,CAAC2B,YAAxB,wBACG,YAAK,SAAS,CAAE3B,OAAO,CAAC4B,SAAxB,CAAmC,GAAG,CAAEzB,YAAxC,CAAsD,GAAG,CAAC,EAA1D,EADH,cAEG,cACG,SAAS,CAAEH,OAAO,CAAC6B,KADtB,CAEG,IAAI,CAAC,UAFR,CAGG,QAAQ,CAAE,kBAACC,CAAD,QAAOhB,CAAAA,WAAW,CAACgB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB,EAHb,EAFH,GAXH,cAmBG,YAAK,SAAS,CAAEhC,OAAO,CAACiC,MAAxB,UAAiClB,UAAU,EAAI,IAA/C,EAnBH,GADH,cAsBG,YAAK,SAAS,CAAEf,OAAO,CAACkC,YAAxB,uBACG,KAAC,MAAD,EAAQ,WAAW,CAAEf,YAArB,mBADH,EAtBH,GADH,CA4BF","sourcesContent":["import classes from \"./Login.module.css\";\r\nimport Button from \"../../../components/common/button/Button\";\r\nimport emailIcon from \"../../../assets/email.png\";\r\nimport passwordIcon from \"../../../assets/password.png\";\r\n\r\nimport axios from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useNavigate } from \"react-router\";\r\nimport { getUserBooks, toggleIsLoggedIn } from \"../../../services/librarySlice\";\r\n\r\nexport default function Login() {\r\n   const [email, setEmail] = useState(\"\");\r\n   const [password, setPassword] = useState(\"\");\r\n   const [errorState, setErrorState] = useState(\"\");\r\n\r\n   const dispatch = useDispatch();\r\n   const navigate = useNavigate();\r\n\r\n   const onLoginClick = async () => {\r\n      if (email.length === 0 || password.length === 0) {\r\n         return setErrorState(\"Please enter an email and password.\");\r\n      }\r\n      try {\r\n         await axios.post(\"/api/auth/login\", {\r\n            email,\r\n            password,\r\n         });\r\n         dispatch(getUserBooks());\r\n         dispatch(toggleIsLoggedIn());\r\n         navigate(\"/library\");\r\n      } catch (e) {\r\n         setErrorState(e.response.data);\r\n      }\r\n   };\r\n\r\n   return (\r\n      <div className={classes.loginWrapper}>\r\n         <div className={classes.loginBody}>\r\n            <div className={classes.labels}>Email</div>\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={emailIcon} alt=\"\" />\r\n               <input\r\n                  className={classes.input}\r\n                  type=\"text\"\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n               />\r\n            </div>\r\n            <div className={classes.labels}>Password</div>\r\n            <div className={classes.inputWrapper}>\r\n               <img className={classes.inputIcon} src={passwordIcon} alt=\"\" />\r\n               <input\r\n                  className={classes.input}\r\n                  type=\"password\"\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n               />\r\n            </div>\r\n            <div className={classes.errors}>{errorState || null}</div>\r\n         </div>\r\n         <div className={classes.loginButtons}>\r\n            <Button onClickFunc={onLoginClick}>Login</Button>\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}