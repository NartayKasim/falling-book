{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/KASIM/Documents/falling-book/bookist-alpha/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{useDispatch}from\"react-redux\";import{updateUserBooks}from\"../../../services/librarySlice\";import classes from\"./Rating.module.css\";import starEmpty from\"../../../assets/starEmpty.png\";import starFull from\"../../../assets/starFull.png\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function RatingActive(_ref){var book=_ref.book,setBook=_ref.setBook;var dispatch=useDispatch();var _useState=useState(book.user_rating||0),_useState2=_slicedToArray(_useState,2),stars=_useState2[0],setStars=_useState2[1];var _useState3=useState(stars),_useState4=_slicedToArray(_useState3,2),starsIntermediate=_useState4[0],setStarsIntermediate=_useState4[1];var setHover=function setHover(num){setStarsIntermediate(num);setStarsIntermediate(num);};var setHoverExit=function setHoverExit(){setStarsIntermediate(stars);};var onSetStarsClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(num){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setStarsIntermediate(num);setStars(num);onRateBookClick(num);case 3:case\"end\":return _context.stop();}}},_callee);}));return function onSetStarsClick(_x){return _ref2.apply(this,arguments);};}();var onRateBookClick=function onRateBookClick(rating){axios.post(\"/api/library/rate\",{book:book,rating:rating}).then(function(response){dispatch(updateUserBooks(response.data));setBook(response.data);});};return/*#__PURE__*/_jsxs(\"div\",{className:classes.ratingActive,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.ratingActiveTitle,children:/*#__PURE__*/_jsx(\"span\",{children:\"Your Rating\"})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.ratingActiveRating,children:[/*#__PURE__*/_jsx(\"img\",{className:classes.starImage,src:starsIntermediate<1?starEmpty:starFull,onMouseEnter:function onMouseEnter(){return setHover(1);},onMouseLeave:function onMouseLeave(){return setHoverExit();},onClick:function onClick(){return onSetStarsClick(1);},alt:\"star\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.starImage,src:starsIntermediate<2?starEmpty:starFull,onMouseEnter:function onMouseEnter(){return setHover(2);},onMouseLeave:function onMouseLeave(){return setHoverExit();},onClick:function onClick(){return onSetStarsClick(2);},alt:\"star\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.starImage,src:starsIntermediate<3?starEmpty:starFull,onMouseEnter:function onMouseEnter(){return setHover(3);},onMouseLeave:function onMouseLeave(){return setHoverExit();},onClick:function onClick(){return onSetStarsClick(3);},alt:\"star\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.starImage,src:starsIntermediate<4?starEmpty:starFull,onMouseEnter:function onMouseEnter(){return setHover(4);},onMouseLeave:function onMouseLeave(){return setHoverExit();},onClick:function onClick(){return onSetStarsClick(4);},alt:\"star\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.starImage,src:starsIntermediate<5?starEmpty:starFull,onMouseEnter:function onMouseEnter(){return setHover(5);},onMouseLeave:function onMouseLeave(){return setHoverExit();},onClick:function onClick(){return onSetStarsClick(5);},alt:\"star\"})]})]});}","map":{"version":3,"sources":["C:/Users/KASIM/Documents/falling-book/bookist-alpha/client/src/components/book/ratings/RatingActive.jsx"],"names":["useState","useDispatch","updateUserBooks","classes","starEmpty","starFull","axios","RatingActive","book","setBook","dispatch","user_rating","stars","setStars","starsIntermediate","setStarsIntermediate","setHover","num","setHoverExit","onSetStarsClick","onRateBookClick","rating","post","then","response","data","ratingActive","ratingActiveTitle","ratingActiveRating","starImage"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { updateUserBooks } from \"../../../services/librarySlice\";\r\nimport classes from \"./Rating.module.css\";\r\nimport starEmpty from \"../../../assets/starEmpty.png\";\r\nimport starFull from \"../../../assets/starFull.png\";\r\nimport axios from \"axios\";\r\n\r\nexport default function RatingActive({ book, setBook }) {\r\n   const dispatch = useDispatch();\r\n\r\n   const [stars, setStars] = useState(book.user_rating || 0);\r\n   const [starsIntermediate, setStarsIntermediate] = useState(stars);\r\n\r\n   const setHover = (num) => {\r\n      setStarsIntermediate(num);\r\n      setStarsIntermediate(num);\r\n   };\r\n\r\n   const setHoverExit = () => {\r\n      setStarsIntermediate(stars);\r\n   };\r\n\r\n   const onSetStarsClick = async (num) => {\r\n      setStarsIntermediate(num);\r\n      setStars(num);\r\n      onRateBookClick(num);\r\n   };\r\n\r\n   const onRateBookClick = (rating) => {\r\n      axios.post(\"/api/library/rate\", { book, rating }).then((response) => {\r\n         dispatch(updateUserBooks(response.data));\r\n         setBook(response.data);\r\n      });\r\n   };\r\n\r\n   return (\r\n      <div className={classes.ratingActive}>\r\n         <div className={classes.ratingActiveTitle}>\r\n            <span>Your Rating</span>\r\n         </div>\r\n         <div className={classes.ratingActiveRating}>\r\n            <img\r\n               className={classes.starImage}\r\n               src={starsIntermediate < 1 ? starEmpty : starFull}\r\n               onMouseEnter={() => setHover(1)}\r\n               onMouseLeave={() => setHoverExit()}\r\n               onClick={() => onSetStarsClick(1)}\r\n               alt=\"star\"\r\n            />\r\n            <img\r\n               className={classes.starImage}\r\n               src={starsIntermediate < 2 ? starEmpty : starFull}\r\n               onMouseEnter={() => setHover(2)}\r\n               onMouseLeave={() => setHoverExit()}\r\n               onClick={() => onSetStarsClick(2)}\r\n               alt=\"star\"\r\n            />\r\n            <img\r\n               className={classes.starImage}\r\n               src={starsIntermediate < 3 ? starEmpty : starFull}\r\n               onMouseEnter={() => setHover(3)}\r\n               onMouseLeave={() => setHoverExit()}\r\n               onClick={() => onSetStarsClick(3)}\r\n               alt=\"star\"\r\n            />\r\n            <img\r\n               className={classes.starImage}\r\n               src={starsIntermediate < 4 ? starEmpty : starFull}\r\n               onMouseEnter={() => setHover(4)}\r\n               onMouseLeave={() => setHoverExit()}\r\n               onClick={() => onSetStarsClick(4)}\r\n               alt=\"star\"\r\n            />\r\n            <img\r\n               className={classes.starImage}\r\n               src={starsIntermediate < 5 ? starEmpty : starFull}\r\n               onMouseEnter={() => setHover(5)}\r\n               onMouseLeave={() => setHoverExit()}\r\n               onClick={() => onSetStarsClick(5)}\r\n               alt=\"star\"\r\n            />\r\n         </div>\r\n      </div>\r\n   );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}