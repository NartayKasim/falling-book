{"ast":null,"code":"import{useSelector,useDispatch}from\"react-redux\";import{withRouter}from\"../../app/hocs\";import{purgeNonUser,updateUserBooks}from\"../../services/librarySlice\";import{AnimatePresence,motion}from\"framer-motion\";import classes from\"./BookPage.module.css\";import Cover from\"../../components/book/cover/Cover\";import Authors from\"../../components/book/authors/Authors\";import Rating from\"../../components/book/ratings/Rating\";import AddToBooklist from\"../../components/book/booklist/AddToBooklist\";import Description from\"../../components/book/description/Description\";import Reviews from\"../../components/book/reviews/Reviews\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var leftOuterVariant={hidden:{boxShadow:\"none\"},shown:{boxShadow:\"var(--box-shadow--emboss)\",transition:{delay:0.2,duration:0.5}}};var leftInnerVariant={hidden:{opacity:0},shown:{opacity:1,transition:{delay:0.7,duration:0.25}}};var useAcquireTargetBook=function useAcquireTargetBook(author,title){var dispatch=useDispatch();var userBooks=useSelector(function(state){return state.library.userBooks;});var filterUserBooks=userBooks.filter(function(book){return book.author===author&&book.title===title;});if(filterUserBooks.length===1){return filterUserBooks[0];}dispatch(purgeNonUser(\"id\"));};var BookPage=function BookPage(props){var author=props.author,title=props.title;var book=useAcquireTargetBook(author,title);var dispatch=useDispatch();var isLoggedIn=useSelector(function(state){return state.library.isLoggedIn;});var updateBook=function updateBook(bookObj){dispatch(updateUserBooks(bookObj));};return/*#__PURE__*/_jsx(\"div\",{className:classes.bookPageWrapper,children:/*#__PURE__*/_jsx(_Fragment,{children:book&&/*#__PURE__*/_jsxs(\"div\",{className:classes.bookPage,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.bookPageLeftWrapper,children:/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsx(motion.div,{variants:leftOuterVariant,initial:\"hidden\",animate:\"shown\",id:classes.disableShadow,className:classes.bookPageLeft,children:/*#__PURE__*/_jsxs(motion.div,{variants:leftInnerVariant,initial:\"hidden\",animate:\"shown\",className:classes.bookPageLeftContent,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.coverWrapper,children:/*#__PURE__*/_jsx(Cover,{imageLinks:book&&book.volume_info.imageLinks,size:\"large\"})}),/*#__PURE__*/_jsx(\"div\",{className:classes.titleWrapper,children:book.title}),/*#__PURE__*/_jsx(\"div\",{className:classes.authorsWrapper,children:/*#__PURE__*/_jsx(Authors,{authors:book&&book.volume_info.authors})}),/*#__PURE__*/_jsxs(\"div\",{className:classes.ratingsWrapper,children:[/*#__PURE__*/_jsx(Rating,{average_rating:book.average_rating,rating_count:book.rating_count}),isLoggedIn&&/*#__PURE__*/_jsx(Rating,{isActive:true,book:book,setBook:updateBook})]}),isLoggedIn&&/*#__PURE__*/_jsx(\"div\",{className:classes.booklistsWrapper,children:/*#__PURE__*/_jsx(AddToBooklist,{book:book&&book,setBook:updateBook})})]})})})}),/*#__PURE__*/_jsx(AnimatePresence,{children:/*#__PURE__*/_jsxs(motion.div,{variants:leftInnerVariant,initial:\"hidden\",animate:\"shown\",className:classes.bookPageRight,children:[/*#__PURE__*/_jsx(Description,{description:book.volume_info.description}),/*#__PURE__*/_jsx(\"div\",{className:classes.bookPageRightSeparator}),/*#__PURE__*/_jsx(\"div\",{className:classes.reviewsWrapper,children:/*#__PURE__*/_jsx(Reviews,{book:book,updateBook:updateBook})})]})})]})})});};export default withRouter(BookPage);","map":{"version":3,"sources":["C:/Users/KASIM/Documents/falling-book/bookist-alpha/client/src/pages/book/BookPage.jsx"],"names":["useSelector","useDispatch","withRouter","purgeNonUser","updateUserBooks","AnimatePresence","motion","classes","Cover","Authors","Rating","AddToBooklist","Description","Reviews","leftOuterVariant","hidden","boxShadow","shown","transition","delay","duration","leftInnerVariant","opacity","useAcquireTargetBook","author","title","dispatch","userBooks","state","library","filterUserBooks","filter","book","length","BookPage","props","isLoggedIn","updateBook","bookObj","bookPageWrapper","bookPage","bookPageLeftWrapper","disableShadow","bookPageLeft","bookPageLeftContent","coverWrapper","volume_info","imageLinks","titleWrapper","authorsWrapper","authors","ratingsWrapper","average_rating","rating_count","booklistsWrapper","bookPageRight","description","bookPageRightSeparator","reviewsWrapper"],"mappings":"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","sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\r\nimport { withRouter } from \"../../app/hocs\";\r\nimport { purgeNonUser, updateUserBooks } from \"../../services/librarySlice\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\n\r\nimport classes from \"./BookPage.module.css\";\r\n\r\nimport Cover from \"../../components/book/cover/Cover\";\r\nimport Authors from \"../../components/book/authors/Authors\";\r\nimport Rating from \"../../components/book/ratings/Rating\";\r\nimport AddToBooklist from \"../../components/book/booklist/AddToBooklist\";\r\nimport Description from \"../../components/book/description/Description\";\r\nimport Reviews from \"../../components/book/reviews/Reviews\";\r\n\r\nconst leftOuterVariant = {\r\n   hidden: {\r\n      boxShadow: \"none\",\r\n   },\r\n   shown: {\r\n      boxShadow: \"var(--box-shadow--emboss)\",\r\n      transition: { delay: 0.2, duration: 0.5 },\r\n   },\r\n};\r\n\r\nconst leftInnerVariant = {\r\n   hidden: {\r\n      opacity: 0,\r\n   },\r\n   shown: {\r\n      opacity: 1,\r\n      transition: { delay: 0.7, duration: 0.25 },\r\n   },\r\n};\r\n\r\nconst useAcquireTargetBook = (author, title) => {\r\n   const dispatch = useDispatch();\r\n   const userBooks = useSelector((state) => state.library.userBooks);\r\n   const filterUserBooks = userBooks.filter(\r\n      (book) => book.author === author && book.title === title\r\n   );\r\n\r\n   if (filterUserBooks.length === 1) {\r\n      return filterUserBooks[0];\r\n   }\r\n   dispatch(purgeNonUser(\"id\"));\r\n};\r\n\r\nconst BookPage = (props) => {\r\n   const { author, title } = props;\r\n   const book = useAcquireTargetBook(author, title);\r\n   const dispatch = useDispatch();\r\n   const isLoggedIn = useSelector((state) => state.library.isLoggedIn);\r\n\r\n   const updateBook = (bookObj) => {\r\n      dispatch(updateUserBooks(bookObj));\r\n   };\r\n\r\n   return (\r\n      <div className={classes.bookPageWrapper}>\r\n         <>\r\n            {book && (\r\n               <div className={classes.bookPage}>\r\n                  <div className={classes.bookPageLeftWrapper}>\r\n                     <AnimatePresence>\r\n                        <motion.div\r\n                           variants={leftOuterVariant}\r\n                           initial=\"hidden\"\r\n                           animate=\"shown\"\r\n                           id={classes.disableShadow}\r\n                           className={classes.bookPageLeft}\r\n                        >\r\n                           <motion.div\r\n                              variants={leftInnerVariant}\r\n                              initial=\"hidden\"\r\n                              animate=\"shown\"\r\n                              className={classes.bookPageLeftContent}\r\n                           >\r\n                              <div className={classes.coverWrapper}>\r\n                                 <Cover\r\n                                    imageLinks={\r\n                                       book && book.volume_info.imageLinks\r\n                                    }\r\n                                    size={\"large\"}\r\n                                 />\r\n                              </div>\r\n                              <div className={classes.titleWrapper}>\r\n                                 {book.title}\r\n                              </div>\r\n                              <div className={classes.authorsWrapper}>\r\n                                 <Authors\r\n                                    authors={book && book.volume_info.authors}\r\n                                 />\r\n                              </div>\r\n\r\n                              <div className={classes.ratingsWrapper}>\r\n                                 <Rating\r\n                                    average_rating={book.average_rating}\r\n                                    rating_count={book.rating_count}\r\n                                 />\r\n                                 {isLoggedIn && (\r\n                                    <Rating\r\n                                       isActive={true}\r\n                                       book={book}\r\n                                       setBook={updateBook}\r\n                                    />\r\n                                 )}\r\n                              </div>\r\n                              {isLoggedIn && (\r\n                                 <div className={classes.booklistsWrapper}>\r\n                                    <AddToBooklist\r\n                                       book={book && book}\r\n                                       setBook={updateBook}\r\n                                    />\r\n                                 </div>\r\n                              )}\r\n                           </motion.div>\r\n                        </motion.div>\r\n                     </AnimatePresence>\r\n                  </div>\r\n                  <AnimatePresence>\r\n                     <motion.div\r\n                        variants={leftInnerVariant}\r\n                        initial=\"hidden\"\r\n                        animate=\"shown\"\r\n                        className={classes.bookPageRight}\r\n                     >\r\n                        <Description\r\n                           description={book.volume_info.description}\r\n                        />\r\n                        <div className={classes.bookPageRightSeparator}></div>\r\n                        <div className={classes.reviewsWrapper}>\r\n                           <Reviews book={book} updateBook={updateBook} />\r\n                        </div>\r\n                     </motion.div>\r\n                  </AnimatePresence>\r\n               </div>\r\n            )}\r\n         </>\r\n      </div>\r\n   );\r\n};\r\n\r\nexport default withRouter(BookPage);\r\n"]},"metadata":{},"sourceType":"module"}